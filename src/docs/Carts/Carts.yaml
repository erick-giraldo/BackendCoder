paths:
  /api/carts:
    post:
      summary: Crear un Carrito
      tags:
        - Carrito
      responses:
        '200':
          description: Carrito registrado
        '400':
          description: Error en los datos enviados
        '500':
          description: Error interno del servidor

    get:
      summary: Listar Carritos
      tags:
        - Carrito
      responses:
        '200':
          description: Lista de Carritos
        '500':
          description: Error interno del servidor

  /api/carts/{id}:
    get:
      summary: Obtener un Carrito por ID
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      responses:
        '200':
          description: Carrito encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar un Carrito por ID
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      responses:
        '200':
          description: Carrito eliminado
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/product/{id}:
    post:
      summary: Agregar producto al Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
      responses:
        '200':
          description: Producto agregado al carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    put:
      summary: Descontar producto del Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
      responses:
        '200':
          description: Se descontaron productos del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar producto del Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
      responses:
        '200':
          description: Se eliminó el producto del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/qty/product/{id}:
    put:
      summary: Actualizar cantidad de producto en el Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuantityRequest'
      responses:
        '200':
          description: Se actualizó la cantidad de productos del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/qty/products:
    put:
      summary: Actualizar todos los productos en el Carrito
      tags:
        - Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCartRequest'
      responses:
        '200':
          description: Se actualizó la cantidad de productos del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

components:
  schemas:
    CartRequest:
      type: object
      properties:
        products:
          type: array
          description: Productos agregados al carrito
        id:
          type: number
          description: ID del carrito
      example:
        _id: "649c6732893d41319955e2eb"
        products: []
        createdAt: "2023-06-28T17:00:34.317Z"
        updatedAt: "2023-06-28T17:00:34.317Z"
        __v: 0
        id: 51

    CartResponse:
      type: object
      properties:
        products:
          type: array
          description: Productos en el carrito
        id:
          type: number
          description: ID del carrito
      example:
        _id: "649c6732893d41319955e2eb"
        products: []
        createdAt: "2023-06-28T17:00:34.317Z"
        updatedAt: "2023-06-28T17:00:34.317Z"
        __v: 0
        id: 51

    ProductRequest:
      type: object
      properties:
        product:
          type: object
          description: Producto a agregar al carrito
      example:
        product:
          _id: "6426434a69f571391d2dcbd4"
          quantity: 1

    QuantityRequest:
      type: object
      properties:
        quantity:
          type: number
          description: Nueva cantidad del producto
      example:
        quantity: 5

    UpdateCartRequest:
      type: object
      properties:
        products:
          type: array
          description: Lista de productos a actualizar en el carrito
      example:
        products:
          - _id: "6426439d69f571391d2dcbd6"
            quantity: 5
          - _id: "6426434a69f571391d2dcbd4"
            quantity: 1
