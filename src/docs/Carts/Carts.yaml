paths:
  /api/carts:
    post:
      summary: Crear un Carrito
      tags:
        - Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/cart'
      responses:
        '200':
          description: Carrito registrado
        '400':
          description: Error en los datos enviados
        '500':
          description: Error interno del servidor

    get:
      summary: Listar Carritos
      tags:
        - Carrito
      responses:
        '200':
          description: Lista de carritos
        '404':
          description: Lista de carritos no encontrada
        '500':
          description: Error interno del servidor

  /api/carts/{id}:
    get:
      summary: Obtener un Carrito por ID
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      responses:
        '200':
          description: Carrito encontrado
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar un Carrito por ID
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      responses:
        '200':
          description: Carrito eliminado
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/{cid}/product/{pid}:
    post:
      summary: Agregar producto al Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: cid
          schema:
            type: string
          required: true
          description: Id del Carrito
        - in: path
          name: pid
          schema:
            type: string
          required: true
          description: Id del Producto
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBody/ProductRequest'
      responses:
        '200':
          description: Producto agregado al carrito exitosamente
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    put:
      summary: Descontar producto del Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBody/ProductRequest'
      responses:
        '200':
          description: Se descontaron productos del carrito exitosamente
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar producto del Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBody/ProductRequest'
      responses:
        '200':
          description: Se eliminó el producto del carrito exitosamente
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/qty/product/{id}:
    put:
      summary: Actualizar cantidad de producto en el Carrito
      tags:
        - Carrito
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID del Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBody/qtyProduct'
      responses:
        '200':
          description: Se actualizó la cantidad de productos del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/cart'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

  /api/carts/qty/products:
    put:
      summary: Actualizar todos los productos en el Carrito
      tags:
        - Carrito
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBody/updateProductCart'
      responses:
        '200':
          description: Se actualizó la cantidad de productos del carrito exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/cart'
        '404':
          description: Carrito no encontrado
        '500':
          description: Error interno del servidor

components:
  schemas:
    cart:
      type: object
      properties:
        products:
          type: array
          description: Productos agregados al carrito
        id:
          type: string
          description: ID del carrito
      example:
        _id: "64a10a6a21c3fcddd96e176e"
        products: []	
        createdAt: "2023-07-02T05:26:02.695Z"
        updatedAt: "2023-07-02T07:05:31.729Z"
        __v: 0
        id: 61

       

  requestBody:
    ProductRequest:
      type: object
      properties:
        products:
          type: array
          description: Productos agregados al carrito
        id:
          type: string
          description: ID del carrito
      example:
        _id: "64a10a6a21c3fcddd96e176e"
        products:
          - _id: "6426439d69f571391d2dcbd6"
            quantity: 5
          - _id: "6426434a69f571391d2dcbd4"
            quantity: 1
        createdAt: "2023-07-02T05:26:02.695Z"
        updatedAt: "2023-07-02T07:05:31.729Z"
        __v: 0
        id: 61   
        
    qtyProduct:
      type: object
      properties:
        quantity:
          type: number
          description: Cantidad del producto
      example:
        quantity: 5

    updateProductCart:
      type: object
      properties:
        products:
          type: array
          description: Productos en el carrito
      example:
        products: 
          - _id: "6426439d69f571391d2dcbd6"
            quantity: 5
          - _id: "6426434a69f571391d2dcbd4"
            quantity: 1
